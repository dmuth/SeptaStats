
{% extends "base.html" %}

{% block title %}API Endpoints - Septa Stats!{% endblock %}

{% block content %}

<script src="https://cdnjs.cloudflare.com/ajax/libs/canvasjs/1.7.0/canvasjs.min.js" ></script>

<h1>API Endpoints</h1>


What follows are a list of API endpoints that are provided here.  These endpoints
are the same ones used in the public facing graphs on this site.
<br/>
<br/>

All data is returned in JSON format, with a field called "metadata" which holds data
related to the query, and "data" which holds the results of the query itself.
<br/>
<br/>

Please be considerate and try to hit each endpoint no more than once per minute.
If I have to go and implement a quota policy, that's no fun for anyone.


<h2>System API calls</h2>

<h3>
/api/current/system
</h3>

Return a chronological list of which currently running trains are the latest.
<br/>

This is useful to get an overall picture of the Regional Rail train system.

<h3>
/api/current/system/totals
</h3>

Get a list of the total lateness of all running trains, by hour over the last 7 days.
<br/>

This is useful for comparing the current day to previous days in the event of bad weather, etc.


<h2>Train API calls</h2>

<h3>
/api/current/train/{trainno}
</h3>

Get the current status of a train if it is running today.  Data includes
a list of stops made in chronological order and the lateness for each stop.


<h3>
/api/current/train/{trainno}/history
</h3>

Get the lateness "history" of a specific train for the last 7 days, by stop.
<br/>

Note that not all trains run on all days.  Some trains are weekday only while others are weekend only.


<h3>
/api/current/train/{trainno}/history/average
</h3>

Get the average lateness per stop of a given train.


<h2>Line API calls</h2>

<h3>
/api/current/lines
</h3>

Get a list of all train lines.

<h3>
/api/current/line/{train line}/outbound
</h3>

Get a list of all outbound trains for this line, and their lateness.

<h3>
/api/current/line/{train line}/inbound
</h3>

Get a list of all inbound trains for this line, and their lateness.


<h2>Station API calls</h2>

<h3>
/api/current/stations
</h3>

Get a list of all train stations.

<h3>
/api/current/station/{station}/trains
</h3>

Get a list of all trains which have arrived at this station in the last 24 hours, and their lateness.

<h3>
/api/current/station/{station}/trains/latest
</h3>

Get a list of the most recent trains which have arrived at this station, and their lateness.


<h3>
/api/current/station/{station}/stats
</h3>

Get a list by hour of how many trains passed through that station, and the average lateness of each train.
<br/>
<br/>


{% endblock %}

